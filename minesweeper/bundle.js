(()=>{"use strict";function e(){const e=document.querySelector(".game-zone").children,t=[];let n=[];for(let c=0;c<e.length;c++)n.push(e[c]),10===n.length&&(t.push(n),n=[]);return t}(()=>{const e=document.createElement("header"),t=document.createElement("div"),n=document.createElement("div");e.classList.add("header"),t.classList.add("timer-contain"),n.classList.add("timer"),n.innerHTML="10:00",document.body.append(e),e.append(t),t.append(n)})();let t=0;const n=()=>{const e=document.querySelector(".game-zone"),t=document.createElement("div");t.classList.add("cell"),e.append(t)},c=e=>{const t=document.querySelectorAll(".cell"),n=document.createElement("span");n.classList.add("mines"),t[e].classList.contains("disable")?t[e+2].append(n):t[e].append(n)};(()=>{(()=>{const e=document.querySelector("body"),t=document.createElement("main"),n=document.createElement("div");t.classList.add("main"),n.classList.add("game-zone"),e.append(t),t.append(n)})();for(let e=0;e<100;e++)n();document.querySelector(".game-zone").addEventListener("click",(e=>{if(e.target.classList.contains("cell")&&(0===t&&(e=>{const t=document.querySelector(".timer"),n=document.querySelector(".timer-contain");let c=600;const a=setInterval((()=>{const e=Math.floor(c/60),s=c%60;t.innerHTML=`${e}:${s<10?"0":""}${s}`,c<=0?(clearInterval(a),n.textContent="Time is OVER\n You lost"):c--}),1e3)})(),t++,2===t)){const e=(()=>{const e=[];for(;e.length<10;){const t=Math.floor(100*Math.random());e.includes(t)||e.push(t)}return e})();for(let t=0;t<10;t++)c(e[t])}})),(()=>{const e=document.querySelector(".main"),t=document.createElement("span");t.classList.add("reset-btn"),t.textContent="Reset",e.before(t)})(),(()=>{const e=document.querySelector(".header"),t=document.createElement("div"),n=document.createElement("p");t.classList.add("flags-contain"),n.classList.add("flags__content"),e.append(t),t.append(n)})()})(),document.querySelector(".game-zone").addEventListener("contextmenu",(e=>{e.target.classList.contains("cell")&&(e.preventDefault(),e.target.classList.toggle("flag"))})),(()=>{const e=document.querySelector(".flags__content"),t=document.querySelector(".game-zone");let n=10;e.innerHTML=`flags <br> You have: ${n}`,t.addEventListener("contextmenu",(t=>{t.target.classList.contains("flag")&&n>=0&&n<=10&&(n--,n<0&&(t.target.classList.toggle("flag"),n=0,e.innerHTML="flags <br> You not have flags"),e.innerHTML=`flags <br> You have: ${n}`),t.target.classList.contains("flag")||n<0&&t.target.classList.remove("flag")}))})(),(()=>{const e=document.querySelector(".game-zone"),t=document.querySelector(".timer-contain"),n=e.children;e.addEventListener("click",(e=>{const c=e.target;if((!e.target.classList.contains("flag")||0===c.children.length)&&0!==c.children.length&&c.children[0].classList.contains("mines")){t.textContent="Game over.\n Try again";for(let e of n)e.classList.add("disable"),0!==e.children.length&&e.children[0].classList.add("active")}}))})(),(()=>{const e=document.querySelectorAll(".cell"),t=(document.querySelectorAll(".mines"),document.querySelector(".game-zone")),n=document.querySelector(".timer-contain"),c=document.querySelector(".timer"),a=document.createElement("p");a.classList.add("click-counter"),n.append(a),a.textContent="move: 0";let s=0,l=0;t.addEventListener("click",(t=>{let o=c.innerHTML.split(":");o=60*+o[0]+ +o[1],t.target.classList.contains("cell")&&(s++,a.textContent=`move: ${s}`),e.forEach((e=>{e.classList.contains("disable")&&l++})),90===l&&(n.textContent=`Hooray! You found all mines in ${o} seconds and ${s} moves!`)})),t.addEventListener("contextmenu",(e=>{e.target.classList.contains("cell")&&(s++,a.textContent=`move: ${s}`)}))})(),document.querySelector(".game-zone").addEventListener("click",(e=>{const t=e.target;e.target.classList.contains("flag")||(t.classList.add("disable"),0===t.children.length)||t.children[0].classList.add("active")})),document.querySelector(".game-zone").addEventListener("click",(t=>{if("cell disable"===t.target.className){if(t.target.classList.add("find"),1===t.target.children.length)return;if(t.target.classList.contains("find")){const c=document.querySelector(".find"),a=(t=>{const n=e();let c=[];for(let e=0;e<n.length;e++)for(let a=0;a<n[e].length;a++)if(n[e][a].className===t)return e-1<0?([n[e][a-1],n[e][a],n[e][a+1],n[e+1][a-1],n[e+1][a],n[e+1][a+1]].forEach((e=>{void 0!==e&&0!==e.children.length&&c.push(e)})),c.length):e+1>=n.length?([n[e-1][a-1],n[e-1][a],n[e-1][a+1],n[e][a-1],n[e][a],n[e][a+1]].forEach((e=>{void 0!==e&&0!==e.children.length&&c.push(e)})),c.length):a-1<0?([n[e-1][a],n[e-1][a+1],n[e][a],n[e][a+1],n[e+1][a],n[e+1][a+1]].forEach((e=>{void 0!==e&&0!==e.children.length&&c.push(e)})),c.length):a+1>n[e].length?([n[e-1][a-1],n[e-1][a],n[e][a-1],n[e][a],n[e+1][a-1],n[e+1][a]].forEach((e=>{void 0!==e&&0!==e.children.length&&c.push(e)})),c.length):([n[e-1][a-1],n[e-1][a],n[e-1][a+1],n[e][a-1],n[e][a],n[e][a+1],n[e+1][a-1],n[e+1][a],n[e+1][a+1]].forEach((e=>{void 0!==e&&0!==e.children.length&&c.push(e)})),c.length);c=[]})(t.target.className);if(0===a)return c.textContent="",void t.target.classList.remove("find");c.textContent=a,c.style.color=0===(n=a)?"green":1===n?"darksalmon":2===n?"orange":3===n?"red":4===n?"indigo":"black",t.target.classList.remove("find")}}var n})),e(),document.querySelector(".reset-btn").addEventListener("click",(()=>{location.reload()}))})();